<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>Kitten Cards 2.0</title>
    <link rel="icon" type="image/x-icon" href="levels/favicon.ico">
    <link rel="stylesheet" href="styles.css?v=4.0">
    <style>
        body {
            margin: 0;
            background: #FFEFD5;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        canvas {
            background: black;
            image-rendering: pixelated;
        }

        #hud {
            position: absolute;
            top: 10px;
            left: 10px;
            font-family: monospace;
            color: black;
            font-size: 18px;
            background: rgba(255, 255, 255, 0.7);
            padding: 5px 10px;
            border: 2px solid #FFA7C4;
        }
    </style>
</head>

<body>

    <div id="hud">
        <span id="player-name-display"></span><br>
        –í—Ä–µ–º—è: <span id="timer">0</span> c |
        –ñ–∏–∑–Ω–∏: <span id="lives">3</span> |
        –ö–æ—Ç–∏–∫–∏: <span id="kittens">0</span>
    </div>

    <canvas id="gameCanvas" width="384" height="384"></canvas>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ "–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞" -->
    <div id="game-over-modal" class="modal hidden">
        <div class="modal-content">
            <h2>–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</h2>
            <p>–ò–≥—Ä–æ–∫: <span id="modal-player-name"></span></p>
            <p>–í—Ä–µ–º—è: <span id="player-time">0</span> —Å–µ–∫. | –ö–æ—Ç–∏–∫–∏: <span id="modal-kittens">0</span> üê±</p>
            <h3>–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</h3>
            <div id="leaderboard-container"></div>
            <button id="btn-exit">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ "–ü–æ–±–µ–¥–∞" -->
    <div id="victory-modal" class="modal hidden">
        <div class="modal-content">
            <h2>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! üéâ</h2>
            <p>–í—ã –ø—Ä–æ—à–ª–∏ –≤—Å–µ —É—Ä–æ–≤–Ω–∏!</p>
            <p>–ò–≥—Ä–æ–∫: <span id="victory-player-name"></span></p>
            <p>–í—Ä–µ–º—è: <span id="victory-time">0</span> —Å–µ–∫. | –ö–æ—Ç–∏–∫–∏: <span id="victory-kittens">0</span> üê±</p>
            <h3>–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</h3>
            <div id="victory-leaderboard-container"></div>
            <button id="btn-victory-exit">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
        </div>
    </div>

    <script>
        window.canvas = document.getElementById("gameCanvas");
        window.ctx = canvas.getContext("2d");
    </script>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π -->
    <script src="managers/mapManager.js"></script>
    <script src="managers/spriteManager.js"></script>
    <script src="managers/entityManager.js"></script>
    <script src="managers/eventManager.js"></script>
    <script src="managers/physicManager.js"></script>
    <script src="managers/soundManager.js"></script>
    <script src="managers/gameManager.js"></script>
    <script src="leaderboard.js"></script>

    <script>
        window.onload = function () {
            // –ü–æ–ª—É—á–∞–µ–º –∏–º—è –∏–≥—Ä–æ–∫–∞ –∏–∑ localStorage
            const playerName = localStorage.getItem('kitten.username') || "–ò–≥—Ä–æ–∫";

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–º—è –∏–≥—Ä–æ–∫–∞ –î–û –∑–∞–≥—Ä—É–∑–∫–∏
            gameManager.playerName = playerName;
            soundManager.init();
            soundManager.loadArray([
                "levels/sounds/attack-swift-punch-bop-audio-1-1-00-00.mp3",
                "levels/sounds/game-over.wav",
                "levels/sounds/two_cards.wav",
                "levels/sounds/game-start.wav",
                "levels/sounds/main-theme.mp3",
                "levels/sounds/new-level.wav",
                "levels/sounds/pickup_bonus.wav",
            ]);
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–º—è –≤ HUD
            document.getElementById("player-name-display").innerText = playerName;

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–∞—Ä—Ç—É, —Å–ø—Ä–∞–π—Ç—ã –∏ –æ–±—ä–µ–∫—Ç—ã
            gameManager.loadAll();

            // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞ –∏ –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
            gameManager.startTimer();
            gameManager.play();
        };
    </script>

</body>

</html>